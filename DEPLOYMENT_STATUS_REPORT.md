# üìä –û—Ç—á–µ—Ç –æ –¥–µ–ø–ª–æ–µ –ø—Ä–æ–µ–∫—Ç–∞ USDX/Wexel –Ω–∞ DigitalOcean

## üìå –ö—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞

**–î–∞—Ç–∞:** 29 –æ–∫—Ç—è–±—Ä—è 2025  
**–î—Ä–æ–ø–ª–µ—Ç IP:** 134.209.173.236  
**Droplet ID:** 527022765  
**–†–µ–≥–∏–æ–Ω:** NYC3 (New York 3)  
**–†–∞–∑–º–µ—Ä:** s-2vcpu-4gb (2 CPU, 4GB RAM)  
**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–ß–ê–°–¢–ò–ß–ù–û –í–´–ü–û–õ–ù–ï–ù** - —Ç—Ä–µ–±—É–µ—Ç —Å–±–æ—Ä–∫–∏ –∏ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

**SSH –¥–æ—Å—Ç—É–ø:**
```bash
ssh -i ~/.ssh/id_rsa_do_deploy_usdx-wexel root@134.209.173.236
```

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:**
1. ‚ùå Backend –Ω–µ —Å–æ–±—Ä–∞–Ω (`pnpm build` –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω)
2. ‚ùå Frontend –Ω–µ —Å–æ–±—Ä–∞–Ω (`pnpm build` –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω)  
3. ‚ùå Firewall –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ—Ä—Ç—ã 3000 –∏ 3001
4. ‚ùå –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–µ –∑–∞–ø—É—â–µ–Ω—ã

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ –î—Ä–æ–ø–ª–µ—Ç —Å–æ–∑–¥–∞–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ PostgreSQL –∏ Redis –∑–∞–ø—É—â–µ–Ω—ã
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- ‚úÖ –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —Ä–∞–±–æ—Ç—ã

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥—Ä–æ–ø–ª–µ—Ç–∞
- ‚úÖ **–î—Ä–æ–ø–ª–µ—Ç —Å–æ–∑–¥–∞–Ω** —á–µ—Ä–µ–∑ DigitalOcean API
- ‚úÖ **SSH –∫–ª—é—á —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω** –∏ –¥–æ–±–∞–≤–ª–µ–Ω –≤ DigitalOcean (ID: 51662735)
  - –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á: `/home/noda/.ssh/id_rsa_do_deploy_usdx-wexel`
  - –ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á: `/home/noda/.ssh/id_rsa_do_deploy_usdx-wexel.pub`
- ‚úÖ **SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**
- ‚úÖ **–°–µ—Ä–≤–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–Ω:**
  - Ubuntu 22.04 LTS
  - Docker 28.2.2 —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –∑–∞–ø—É—â–µ–Ω
  - Docker Compose —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
  - Node.js 20.19.5 —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
  - pnpm 9.5.0 —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
  - PostgreSQL client —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
  - Nginx —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (–¥–ª—è –±—É–¥—É—â–µ–≥–æ SSL)
  - Firewall –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–ø–æ—Ä—Ç—ã 22, 80, 443 –æ—Ç–∫—Ä—ã—Ç—ã)

### 2. –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚úÖ **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω:** `https://github.com/olegin77/TUSD`
  - –õ–æ–∫–∞–ª—å–Ω—ã–π –ø—É—Ç—å: `/opt/usdx-wexel`
  - –í–µ—Ç–∫–∞: `main`
- ‚úÖ **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:** `pnpm install` –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ

### 3. –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (Docker)
- ‚úÖ **PostgreSQL –∑–∞–ø—É—â–µ–Ω:**
  - –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä: `local_db_1`
  - –ü–æ—Ä—Ç: 5432
  - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: `usdx_wexel`
  - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: `usdx`
  - –ü–∞—Ä–æ–ª—å: `usdxpassword`
  - DATABASE_URL: `postgresql://usdx:usdxpassword@localhost:5432/usdx_wexel`
  
- ‚úÖ **Redis –∑–∞–ø—É—â–µ–Ω:**
  - –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä: `local_redis_1`
  - –ü–æ—Ä—Ç: 6379
  - REDIS_URL: `redis://localhost:6379`

### 4. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **Prisma Client —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω**
- ‚úÖ **–ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã:**
  - `20241028_tron_tables` - –ø—Ä–∏–º–µ–Ω–µ–Ω–∞
  - `20241201000000_init` - –ø—Ä–∏–º–µ–Ω–µ–Ω–∞
- ‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é**

### 5. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚úÖ **–§–∞–π–ª `.env.production` —Å–æ–∑–¥–∞–Ω** –≤ `/opt/usdx-wexel/`
- ‚úÖ **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã:**
  ```env
  DATABASE_URL=postgresql://usdx:usdxpassword@localhost:5432/usdx_wexel
  REDIS_URL=redis://localhost:6379
  NODE_ENV=production
  API_PORT=3001
  CORS_ALLOWED_ORIGINS=http://localhost:3000,http://134.209.173.236:3000
  JWT_SECRET=<—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω>
  ADMIN_JWT_SECRET=<—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω>
  JWT_EXPIRES_IN=7d
  SOLANA_RPC_URL=https://api.devnet.solana.com
  SOLANA_WEBSOCKET_URL=wss://api.devnet.solana.com
  ```

### 6. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- ‚ùå **Backend (NestJS)**: –ù–ï –ó–ê–ü–£–©–ï–ù - –æ—à–∏–±–∫–∞ —Å–±–æ—Ä–∫–∏
  - –ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞: `pnpm start:prod`
  - –õ–æ–≥–∏: `/tmp/indexer.log`
  - –ü–æ—Ä—Ç: 3001
  - **–û–®–ò–ë–ö–ê:** `Cannot find module '/opt/usdx-wexel/apps/indexer/dist/main'`
  - **–ü–†–ò–ß–ò–ù–ê:** –ü—Ä–æ–µ–∫—Ç –Ω–µ —Å–æ–±—Ä–∞–Ω (–æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∫–æ–º–∞–Ω–¥–∞ `pnpm build`)
  
- ‚ùå **Frontend (Next.js)**: –ù–ï –ó–ê–ü–£–©–ï–ù - –æ—à–∏–±–∫–∞ —Å–±–æ—Ä–∫–∏
  - –ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞: `pnpm start`
  - –õ–æ–≥–∏: `/tmp/webapp.log`
  - –ü–æ—Ä—Ç: 3000
  - **–û–®–ò–ë–ö–ê:** `Could not find a production build in the '.next' directory`
  - **–ü–†–ò–ß–ò–ù–ê:** –ü—Ä–æ–µ–∫—Ç –Ω–µ —Å–æ–±—Ä–∞–Ω (–æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∫–æ–º–∞–Ω–¥–∞ `pnpm build`)

---

## ‚ùå –ü—Ä–æ–±–ª–µ–º—ã

### 1. ‚ùó –ö–†–ò–¢–ò–ß–ù–û: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–µ —Å–æ–±—Ä–∞–Ω—ã

**Backend –æ—à–∏–±–∫–∞:**
```
Error: Cannot find module '/opt/usdx-wexel/apps/indexer/dist/main'
```
**–ü—Ä–∏—á–∏–Ω–∞:** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Å–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞. –ù—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å `pnpm build` –≤ `/opt/usdx-wexel/apps/indexer/`

**Frontend –æ—à–∏–±–∫–∞:**
```
Error: Could not find a production build in the '.next' directory. 
Try building your app with 'next build' before starting the production server.
```
**–ü—Ä–∏—á–∏–Ω–∞:** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Å–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞. –ù—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å `pnpm build` –≤ `/opt/usdx-wexel/apps/webapp/`

### 2. Firewall –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ—Ä—Ç—ã 3000 –∏ 3001

**–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å firewall:**
```
Status: active
- 22/tcp   ALLOW
- 80/tcp   ALLOW
- 443/tcp  ALLOW
- 3000/tcp –ë–õ–û–ö–ò–†–û–í–ê–ù ‚ùå
- 3001/tcp –ë–õ–û–ö–ò–†–û–í–ê–ù ‚ùå
```

**–†–µ—à–µ–Ω–∏–µ:**
```bash
ufw allow 3000/tcp
ufw allow 3001/tcp
ufw reload
```

### 3. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–µ –∑–∞–ø—É—â–µ–Ω—ã

**–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:** –ü—Ä–æ—Ü–µ—Å—Å—ã Node.js –Ω–µ –∑–∞–ø—É—â–µ–Ω—ã (—É–ø–∞–ª–∏ –∏–∑-–∑–∞ –æ—à–∏–±–æ–∫ —Å–±–æ—Ä–∫–∏)

**–†–µ—à–µ–Ω–∏–µ:** –ü–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–Ω–æ–≤–æ

### 4. –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç Nginx reverse proxy
- Nginx —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –Ω–æ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- –ù–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ backend/frontend

---

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: üî¥ –ö–†–ò–¢–ò–ß–ù–û - –°–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

1. **–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É:**
   ```bash
   ssh -i ~/.ssh/id_rsa_do_deploy_usdx-wexel root@134.209.173.236
   cd /opt/usdx-wexel
   ```

2. **–°–æ–±—Ä–∞—Ç—å Backend:**
   ```bash
   cd apps/indexer
   pnpm build
   # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø–æ—è–≤–∏–ª–∞—Å—å –ø–∞–ø–∫–∞ dist/
   ls -la dist/
   ```

3. **–°–æ–±—Ä–∞—Ç—å Frontend:**
   ```bash
   cd /opt/usdx-wexel/apps/webapp
   export NEXT_PUBLIC_API_URL="http://134.209.173.236:3001"
   pnpm build
   # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø–æ—è–≤–∏–ª–∞—Å—å –ø–∞–ø–∫–∞ .next/
   ls -la .next/
   ```

4. **–û—Ç–∫—Ä—ã—Ç—å –ø–æ—Ä—Ç—ã –≤ firewall:**
   ```bash
   ufw allow 3000/tcp
   ufw allow 3001/tcp
   ufw reload
   ufw status  # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø–æ—Ä—Ç—ã –æ—Ç–∫—Ä—ã—Ç—ã
   ```

5. **–ó–∞–ø—É—Å—Ç–∏—Ç—å Backend:**
   ```bash
   cd /opt/usdx-wexel/apps/indexer
   source /opt/usdx-wexel/.env.production
   # –ò–ª–∏ –≤—Ä—É—á–Ω—É—é:
   export DATABASE_URL="postgresql://usdx:usdxpassword@localhost:5432/usdx_wexel"
   export REDIS_URL="redis://localhost:6379"
   export NODE_ENV="production"
   export API_PORT="3001"
   export CORS_ALLOWED_ORIGINS="http://localhost:3000,http://134.209.173.236:3000"
   # –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ —Ñ–æ–Ω–µ –∏–ª–∏ —á–µ—Ä–µ–∑ screen/tmux:
   nohup pnpm start:prod > /tmp/indexer.log 2>&1 &
   # –ò–ª–∏ –≤ screen:
   screen -S backend
   pnpm start:prod
   # –û—Ç–∫–ª—é—á–∏—Ç—å—Å—è: Ctrl+A –∑–∞—Ç–µ–º D
   ```

6. **–ó–∞–ø—É—Å—Ç–∏—Ç—å Frontend:**
   ```bash
   cd /opt/usdx-wexel/apps/webapp
   export NEXT_PUBLIC_API_URL="http://134.209.173.236:3001"
   # –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ —Ñ–æ–Ω–µ –∏–ª–∏ —á–µ—Ä–µ–∑ screen/tmux:
   nohup pnpm start > /tmp/webapp.log 2>&1 &
   # –ò–ª–∏ –≤ screen:
   screen -S frontend
   pnpm start
   # –û—Ç–∫–ª—é—á–∏—Ç—å—Å—è: Ctrl+A –∑–∞—Ç–µ–º D
   ```

7. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã:**
   ```bash
   ps aux | grep node
   ss -tuln | grep -E ":(3000|3001)"
   curl http://localhost:3001/health
   curl http://localhost:3000
   ```

8. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏–∑–≤–Ω–µ:**
   ```bash
   # –° –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞:
   curl http://134.209.173.236:3001/health
   curl http://134.209.173.236:3000
   ```

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

1. –°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx –¥–ª—è –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å SSL (Let's Encrypt)
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–æ–º–µ–Ω–Ω–æ–µ –∏–º—è (–µ—Å–ª–∏ –µ—Å—Ç—å)

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞–∫ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

1. –°–æ–∑–¥–∞—Ç—å systemd service –¥–ª—è backend
2. –°–æ–∑–¥–∞—Ç—å systemd service –¥–ª—è frontend
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ

---

## üîë –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–µ—Ä—É

**SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:**
```bash
ssh -i ~/.ssh/id_rsa_do_deploy_usdx-wexel root@134.209.173.236
```

**–ö–ª—é—á–µ–≤—ã–µ –ø—É—Ç–∏:**
- –ü—Ä–æ–µ–∫—Ç: `/opt/usdx-wexel`
- Backend: `/opt/usdx-wexel/apps/indexer`
- Frontend: `/opt/usdx-wexel/apps/webapp`
- –õ–æ–≥–∏ backend: `/tmp/indexer.log`
- –õ–æ–≥–∏ frontend: `/tmp/webapp.log`
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: `/opt/usdx-wexel/.env.production`

---

## üìù API —Ç–æ–∫–µ–Ω—ã –∏ –∫–ª—é—á–∏

**DigitalOcean API Token:**
- –¢–æ–∫–µ–Ω: `<—É–¥–∞–ª–µ–Ω –∏–∑ –æ—Ç—á–µ—Ç–∞ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏>`
- –ê–∫–∫–∞—É–Ω—Ç: `ole-savelev@ya.ru`
- –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –¢–æ–∫–µ–Ω –¥–æ–ª–∂–µ–Ω —Ö—Ä–∞–Ω–∏—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–ª–∏ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ

**SSH –∫–ª—é—á –≤ DigitalOcean:**
- ID: `51662735`
- Fingerprint: `SHA256:xlRffAf/mqUudjUAY+CsN50G5NPSwYm3IGbjfN0eAms`

---

## üîç –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
ps aux | grep node

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤
netstat -tuln | grep -E ":(3000|3001)"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker ps
docker logs local_db_1
docker logs local_redis_1

# –ü—Ä–æ–≤–µ—Ä–∫–∞ firewall
ufw status

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
tail -f /tmp/indexer.log
tail -f /tmp/webapp.log

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
psql postgresql://usdx:usdxpassword@localhost:5432/usdx_wexel -c "SELECT 1;"

# –¢–µ—Å—Ç health endpoint –ª–æ–∫–∞–ª—å–Ω–æ
curl http://localhost:3001/health

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∏–∑–≤–Ω–µ
curl http://134.209.173.236:3001/health
```

---

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ —Å–∫—Ä–∏–ø—Ç—ã

1. `scripts/deploy-do.sh` - –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è –Ω–∞ DigitalOcean
2. `create_droplet_direct.sh` - –ü—Ä—è–º–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –¥—Ä–æ–ø–ª–µ—Ç–∞
3. `deploy_to_server.sh` - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
4. `start_application.sh` - –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
5. `check_all_droplets.sh` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—Ä–æ–ø–ª–µ—Ç–æ–≤
6. `test_ssh_key.sh` - –¢–µ—Å—Ç SSH –∫–ª—é—á–∞

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ü–∞—Ä–æ–ª–∏ –∏ —Å–µ–∫—Ä–µ—Ç—ã:**
   - JWT_SECRET –∏ ADMIN_JWT_SECRET —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã —Å–ª—É—á–∞–π–Ω–æ
   - –ü–∞—Ä–æ–ª—å –ë–î: `usdxpassword` (—Å–ª–∞–±—ã–π, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏–∑–º–µ–Ω–∏—Ç—å)
   - –í—Å–µ —Å–µ–∫—Ä–µ—Ç—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ `.env.production`

2. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
   - Firewall –Ω–∞—Å—Ç—Ä–æ–µ–Ω –±–∞–∑–æ–≤–æ
   - SSL –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
   - –î–æ–º–µ–Ω–Ω–æ–µ –∏–º—è –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ
   - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å fail2ban

3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
   - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
   - –õ–æ–≥–∏ –Ω–µ —Ä–æ—Ç–∏—Ä—É—é—Ç—Å—è
   - –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –±—ç–∫–∞–ø–æ–≤ –ë–î

4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
   - –†–∞–∑–º–µ—Ä –¥—Ä–æ–ø–ª–µ—Ç–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π (2 CPU, 4GB RAM)
   - –î–ª—è production —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –º–∏–Ω–∏–º—É–º 4 CPU, 8GB RAM

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –¥–ª—è –∞–≥–µ–Ω—Ç–∞

1. –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É –ø–æ SSH
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—á–µ–º—É —Å–µ—Ä–≤–∏—Å—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã –∏–∑–≤–Ω–µ
3. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ firewall –∏–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
4. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∑–∞–ø—É—â–µ–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç
5. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–æ IP –∞–¥—Ä–µ—Å—É
6. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
7. –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–æ–º–µ–Ω–Ω–æ–µ –∏–º—è –∏ SSL

---

## üìä –ò—Ç–æ–≥–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å

**–°—Ç–∞—Ç—É—Å –¥–µ–ø–ª–æ—è:** ‚ö†Ô∏è **–ß–ê–°–¢–ò–ß–ù–û –í–´–ü–û–õ–ù–ï–ù**

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- –î—Ä–æ–ø–ª–µ—Ç —Å–æ–∑–¥–∞–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- SSH –¥–æ—Å—Ç—É–ø —Ä–∞–±–æ—Ç–∞–µ—Ç
- Docker –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–ø—É—â–µ–Ω–∞ (PostgreSQL, Redis)
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
- –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

### ‚ùå –ß—Ç–æ –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç:
- ‚ùå **Backend –Ω–µ —Å–æ–±—Ä–∞–Ω** - –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç `dist/` –ø–∞–ø–∫–∞
- ‚ùå **Frontend –Ω–µ —Å–æ–±—Ä–∞–Ω** - –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç `.next/` –ø–∞–ø–∫–∞
- ‚ùå **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–µ –∑–∞–ø—É—â–µ–Ω—ã** - —É–ø–∞–ª–∏ –∏–∑-–∑–∞ –æ—à–∏–±–æ–∫ —Å–±–æ—Ä–∫–∏
- ‚ùå **Firewall –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ—Ä—Ç—ã** 3000 –∏ 3001
- ‚ùå **–°–µ—Ä–≤–∏—Å—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã –∏–∑–≤–Ω–µ** –ø–æ IP –∞–¥—Ä–µ—Å—É

### üîß –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:
1. ‚úÖ –í—ã–ø–æ–ª–Ω–∏—Ç—å `pnpm build` –¥–ª—è backend –∏ frontend
2. ‚úÖ –û—Ç–∫—Ä—ã—Ç—å –ø–æ—Ä—Ç—ã 3000 –∏ 3001 –≤ firewall
3. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç—å backend —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
4. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç—å frontend —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
5. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–æ–≤

**–û–∂–∏–¥–∞–µ–º–æ–µ –≤—Ä–µ–º—è –¥–æ –ø–æ–ª–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞:** 10-15 –º–∏–Ω—É—Ç

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-10-29 21:20 UTC

